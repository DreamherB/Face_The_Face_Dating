<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Sign Up Page</title>
    <!-- JQuery -->
    <script
      src="https://code.jquery.com/jquery-3.6.3.js"
      integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
      crossorigin="anonymous"
    ></script>
    <!-- CSS -->
    <link href="main.css" rel="stylesheet" />
    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
      const createUser = async () => {
        const email = document.getElementById("inputEmail").value;
        const phoneNum = document.getElementById("inputPhoneNum").value;
        const pwd = document.getElementById("inputPassword").value;
        const pwdConfirmation =
          document.getElementById("confirmPassword").value;
        const nickname = document.getElementById("inputNickname").value;

        const response = await axios.post("/api/auth/new_user", {
          email,
          phoneNum,
          pwd,
          pwdConfirmation,
          nickname,
        });

        if (response.data.isSuccess === false) {
          return alert(response.data.msg);
        }

        alert(response.data.msg);
        window.location.replace("/");
      };
    </script>
  </head>
  <body>
    <div class="container py-5">
      <div id="container">
        <div id="loginBox">
          <label class="form-check-label" for="gridCheck">
            <h2>FACE THE FACE DATING</h2>
            <p></p>
            <h3>회원가입</h3>
            <p></p>
            <p></p>
          </label>
          <form class="row g-3">
            <div class="col-12">
              <label for="inputEmail" class="form-label">Email</label>
              <input
                type="text"
                class="form-control"
                id="inputEmail"
                placeholder="email@email.com"
              />
            </div>
            <div class="col-12">
              <label for="inputPhoneNum" class="form-label">Phone Number</label>
              <input
                type="text"
                class="form-control"
                id="inputPhoneNum"
                placeholder="ex) 010-0000-0000"
              />
            </div>
            <div class="col-12">
              <label for="inputPassword" class="form-label">Password</label>
              <input
                type="password"
                class="form-control"
                id="inputPassword"
                placeholder="영문 또는 숫자 4글자 이상"
              />
            </div>
            <div class="col-12">
              <label for="confirmPassword" class="form-label"
                >Password Check</label
              >
              <input
                type="password"
                class="form-control"
                id="confirmPassword"
                placeholder="비밀번호를 한번 더 입력해주세요"
              />
            </div>
            <div class="col-12">
              <label for="inputNickname" class="form-label">Nickname</label>
              <input
                type="text"
                class="form-control"
                id="inputNickname"
                placeholder="영문 또는 숫자 3글자 ~ 20글자"
              />
            </div>

            <div class="col-6">
              <button
                type="button"
                class="btn btn-primary btn-lg"
                onclick="createUser()"
              >
                회원가입 완료
              </button>
            </div>
            <div class="col-6">
              <button
                type="button"
                class="btn btn-secondary btn-lg"
                onclick="history.back()"
              >
                취소
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
